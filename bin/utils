#!/bin/sh
set -e

arg_exists() {
  local target_arg="$1"
  shift
  for arg in "$@"; do
    if [[ "$arg" == "$target_arg" ]]; then
      return 0
    fi
  done
  return 1
}

map_args() {
  local all=("$@")
  shift $#
  while [ $# -gt 0 ]; do
    local c=$1
    local f=$2
    shift 2
    if [ -z "$c" ] && [ "${#all[@]}" -eq 0 ]; then
      "$f"
    elif arg_exists "$c" "${all[@]}"; then
      "$f"
    fi
  done
}

confirm() {
  local prompt="$1"
  while true; do
    echo "$prompt (y/n): "
    read -r response
    case $response in
      [yY]) return 0 ;;
      [nN]|"") return 1 ;;
      *) echo "Please answer y or n" ;;
    esac
  done
}